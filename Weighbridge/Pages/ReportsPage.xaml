<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Weighbridge.Pages.ReportsPage"
             xmlns:viewModels="clr-namespace:Weighbridge.ViewModels"
             x:DataType="viewModels:ReportsViewModel"
             Title="Reports">
    <VerticalStackLayout Padding="10">
        <Label Text="Docket Report by Date Range" FontSize="Large" FontAttributes="Bold" />

        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10" Margin="0,10,0,0">
            <Label Text="Start Date:" VerticalOptions="Center"/>
            <DatePicker Grid.Column="1" Date="{Binding StartDate}" />
        </Grid>

        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10" Margin="0,10,0,0">
            <Label Text="End Date:" VerticalOptions="Center"/>
            <DatePicker Grid.Column="1" Date="{Binding EndDate}" />
        </Grid>

        <Button Text="Generate Report" Command="{Binding GenerateReportCommand}" Margin="0,20,0,0" />

        <Line Stroke="LightGray" X2="{Binding Width, Source={RelativeSource Self}}" Margin="0,10" />

        <Label Text="Results:" FontSize="Medium" FontAttributes="Bold" Margin="0,10,0,5" />

        <CollectionView ItemsSource="{Binding Dockets}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="10" Margin="0,5" BorderColor="LightGray" CornerRadius="5">
                        <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="*,*">
                            <Label Grid.Row="0" Grid.Column="0" Text="{Binding DocketId, StringFormat='Docket ID: {0}'}" FontAttributes="Bold" />
                            <Label Grid.Row="0" Grid.Column="1" Text="{Binding VehicleRego, StringFormat='Vehicle: {0}'}" />
                            <Label Grid.Row="1" Grid.Column="0" Text="{Binding FirstWeightTime, StringFormat='In: {0:g}'}" />
                            <Label Grid.Row="1" Grid.Column="1" Text="{Binding SecondWeightTime, StringFormat='Out: {0:g}'}" />
                            <Label Grid.Row="2" Grid.Column="0" Text="{Binding NetWeight, StringFormat='Net: {0} kg'}" />
                            <Label Grid.Row="3" Grid.Column="0" Text="{Binding TransactionType, StringFormat='Type: {0}'}" />
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>