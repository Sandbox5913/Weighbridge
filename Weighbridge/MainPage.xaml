<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Weighbridge"
             x:Class="Weighbridge.MainPage"
             x:DataType="local:MainPage"
             Title="Weighbridge System"
             BackgroundColor="#0E0E0E">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Settings" Clicked="OnSettingsClicked" IconImageSource="settings.png" />
        <ToolbarItem Text="Data Management" Clicked="OnDatamanagementClicked" IconImageSource="database.png" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <Grid Padding="24" RowSpacing="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="1" ColumnDefinitions="1.2*,*" ColumnSpacing="24">

                <Border Grid.Column="0" 
                        BackgroundColor="#1A1A1A" 
                        Stroke="Transparent"
                        StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="16" Opacity="0.3" />
                    </Border.Shadow>

                    <Grid Padding="32" RowSpacing="24">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" ColumnDefinitions="*,*,*,*" ColumnSpacing="12">
                            <Border Grid.Column="0" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Label Text="2 Weights" TextColor="#CCCCCC" HorizontalOptions="Center" Padding="8" FontSize="12"/>
                            </Border>
                            <Border Grid.Column="1" BackgroundColor="#00FF7F" StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Label Text="Entry + Tare" TextColor="#0E0E0E" HorizontalOptions="Center" Padding="8" FontSize="12" FontAttributes="Bold"/>
                            </Border>
                            <Border Grid.Column="2" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Label Text="Tare + Exit" TextColor="#CCCCCC" HorizontalOptions="Center" Padding="8" FontSize="12"/>
                            </Border>
                            <Border Grid.Column="3" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Label Text="Single Weight" TextColor="#CCCCCC" HorizontalOptions="Center" Padding="8" FontSize="12"/>
                            </Border>
                        </Grid>

                        <Border Grid.Row="1" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12" />
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="Auto, *, Auto" Padding="16,12">
                                <Label Grid.Column="0" Text="‹" TextColor="#00FF7F" FontSize="24" VerticalOptions="Center" FontAttributes="Bold"/>
                                <Label Grid.Column="1" Text="Construction Materials" TextColor="White" FontSize="18" HorizontalOptions="Center" VerticalOptions="Center" FontAttributes="Bold"/>
                                <Label Grid.Column="2" Text="›" TextColor="#00FF7F" FontSize="24" VerticalOptions="Center" FontAttributes="Bold"/>
                            </Grid>
                        </Border>

                        <Border Grid.Row="2" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444" Margin="0,10,0,0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="12" />
                            </Border.StrokeShape>
                            <VerticalStackLayout Padding="20,24" Spacing="8">
                                <Label Text="LIVE WEIGHT" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="24" FontAttributes="Bold"/>
                                <Label Text="{Binding LiveWeight}" TextColor="White" HorizontalOptions="Center" FontSize="48" FontAttributes="Bold" />
                                <Label Text="KG" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="14" />
                            </VerticalStackLayout>
                        </Border>

                        <Grid Grid.Row="3" ColumnDefinitions="*,*,*" ColumnSpacing="16" VerticalOptions="CenterAndExpand">
                            <Border Grid.Column="0" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12" />
                                </Border.StrokeShape>
                                <StackLayout Padding="20,24" Spacing="8">
                                    <Label Text="ENTRANCE" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="12" FontAttributes="Bold"/>
                                    <Label x:Name="WeightLabel" Text="{Binding EntranceWeight}" TextColor="White" HorizontalOptions="Center" FontSize="32" FontAttributes="Bold" />
                                    <Label Text="KG" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="14" />
                                    <Ellipse Fill="#00FF7F" WidthRequest="8" HeightRequest="8" HorizontalOptions="Center" />
                                </StackLayout>
                            </Border>

                            <Border Grid.Column="1" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12" />
                                </Border.StrokeShape>
                                <StackLayout Padding="20,24" Spacing="8">
                                    <Label Text="EXIT" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="12" FontAttributes="Bold"/>
                                    <Label Text="0" TextColor="#888" HorizontalOptions="Center" FontSize="32" FontAttributes="Bold" />
                                    <Label Text="KG" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="14" />
                                    <Ellipse Fill="#444" WidthRequest="8" HeightRequest="8" HorizontalOptions="Center" />
                                </StackLayout>
                            </Border>

                            <Border Grid.Column="2" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="12" />
                                </Border.StrokeShape>
                                <StackLayout Padding="20,24" Spacing="8">
                                    <Label Text="NET WEIGHT" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="12" FontAttributes="Bold"/>
                                    <Label Text="0" TextColor="#888" HorizontalOptions="Center" FontSize="32" FontAttributes="Bold" />
                                    <Label Text="KG" TextColor="#CCCCCC" HorizontalOptions="Center" FontSize="14" />
                                    <Ellipse Fill="#444" WidthRequest="8" HeightRequest="8" HorizontalOptions="Center" />
                                </StackLayout>
                            </Border>
                        </Grid>

                        <Border Grid.Row="4" BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8" />
                            </Border.StrokeShape>
                            <Grid ColumnDefinitions="*,Auto,Auto" Padding="16,12">
                                <StackLayout Grid.Column="0" Orientation="Horizontal" Spacing="8">
                                    <Ellipse Fill="#00FF7F" WidthRequest="8" HeightRequest="8" VerticalOptions="Center" />
                                    <Label Text="CONNECTED" TextColor="#00FF7F" FontSize="12" VerticalOptions="Center" FontAttributes="Bold"/>
                                </StackLayout>
                                <Label Text="{Binding StabilityStatus}"
                                       TextColor="{Binding StabilityColor}"
                                       FontSize="12"
                                       Grid.Column="1"
                                       VerticalOptions="Center"
                                       HorizontalOptions="Start"
                                       FontAttributes="Bold"/>
                                <Label x:Name="ConnectionStatusLabel" Grid.Column="2" Text="COM1 • 9600 bps" TextColor="#CCCCCC" FontSize="12" VerticalOptions="Center"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>

                <Border Grid.Column="1" 
                        BackgroundColor="#1A1A1A" 
                        Stroke="Transparent"
                        StrokeThickness="0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="16" Opacity="0.3" />
                    </Border.Shadow>

                    <ScrollView>
                        <StackLayout Padding="32" Spacing="24" x:DataType="local:MainPage">

                            <StackLayout Spacing="8">
                                <Label Text="Transaction Details" TextColor="White" FontSize="20" FontAttributes="Bold" />
                                <Label Text="Complete the weighing transaction information" TextColor="#CCCCCC" FontSize="14" />
                            </StackLayout>

                            <StackLayout Spacing="12">
                                <Label Text="VEHICLE" TextColor="#CCCCCC" FontSize="12" FontAttributes="Bold" />
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="VehiclePicker" 
                                            Title="Select Vehicle License" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Vehicles}" 
                                            SelectedItem="{Binding SelectedVehicle}" 
                                            ItemDisplayBinding="{Binding LicenseNumber}"
                                            Margin="16,16"/>
                                </Border>
                            </StackLayout>

                            <StackLayout Spacing="12">
                                <Label Text="LOCATIONS" TextColor="#CCCCCC" FontSize="12" FontAttributes="Bold" />
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="SourceSitePicker" 
                                            Title="Source Site" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Sites}" 
                                            SelectedItem="{Binding SelectedSourceSite}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="DestinationSitePicker" 
                                            Title="Destination Site" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Sites}" 
                                            SelectedItem="{Binding SelectedDestinationSite}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                            </StackLayout>

                            <StackLayout Spacing="12">
                                <Label Text="MATERIAL And PARTIES" TextColor="#CCCCCC" FontSize="12" FontAttributes="Bold" />
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="ItemPicker" 
                                            Title="Select Material" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Items}" 
                                            SelectedItem="{Binding SelectedItem}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="CustomerPicker" 
                                            Title="Select Customer" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Customers}" 
                                            SelectedItem="{Binding SelectedCustomer}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="TransportPicker" 
                                            Title="Select Transport Company" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Transports}" 
                                            SelectedItem="{Binding SelectedTransport}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Picker x:Name="DriverPicker" 
                                            Title="Select Driver" 
                                            TextColor="White" 
                                            TitleColor="#888"
                                            BackgroundColor="Transparent"
                                            ItemsSource="{Binding Drivers}" 
                                            SelectedItem="{Binding SelectedDriver}" 
                                            ItemDisplayBinding="{Binding Name}"
                                            Margin="16,16"/>
                                </Border>
                            </StackLayout>

                            <StackLayout Spacing="12">
                                <Label Text="REMARKS" TextColor="#CCCCCC" FontSize="12" FontAttributes="Bold" />
                                <Border BackgroundColor="#2A2A2A" StrokeThickness="1" Stroke="#444" HeightRequest="80">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="8" />
                                    </Border.StrokeShape>
                                    <Editor AutoSize="TextChanges" 
                                            TextColor="White" 
                                            BackgroundColor="Transparent"
                                            Placeholder="Enter any additional notes..."
                                            PlaceholderColor="#888"
                                            Margin="16,8"/>
                                </Border>
                            </StackLayout>

                            <StackLayout Spacing="16">
                                <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
                                    <Button Grid.Column="0" 
                                            Text="TO YARD" 
                                            BackgroundColor="#FFD700" 
                                            TextColor="#0E0E0E" 
                                            CornerRadius="8" 
                                            HeightRequest="48"
                                            FontAttributes="Bold"
                                            Clicked="OnToYardClicked"
                                            IsEnabled="{Binding IsWeightStable}"/>
                                    <Button Grid.Column="1" 
                                            Text="SAVE and PRINT" 
                                            BackgroundColor="#00FF7F" 
                                            TextColor="#0E0E0E" 
                                            CornerRadius="8" 
                                            HeightRequest="48"
                                            FontAttributes="Bold"
                                            Clicked="OnSaveAndPrintClicked"
                                            IsEnabled="{Binding IsWeightStable}"/>
                                </Grid>

                                <Grid ColumnDefinitions="*,*,*" ColumnSpacing="12">
                                    <Button Grid.Column="0" 
                                            Text="UPDATE TARE" 
                                            BackgroundColor="#2A2A2A" 
                                            TextColor="White" 
                                            CornerRadius="8" 
                                            HeightRequest="40"
                                            FontSize="12"
                                            Clicked="OnUpdateTareClicked"/>
                                    <Button Grid.Column="1" 
                                            Text="CERTIFICATES" 
                                            BackgroundColor="#2A2A2A" 
                                            TextColor="White" 
                                            CornerRadius="8" 
                                            HeightRequest="40"
                                            FontSize="12"
                                            Clicked="OnCertificatesClicked"/>
                                    <Button Grid.Column="2" 
                                            Text="REPORTS" 
                                            BackgroundColor="#2A2A2A" 
                                            TextColor="White" 
                                            CornerRadius="8" 
                                            HeightRequest="40"
                                            FontSize="12"
                                            Clicked="OnReportsClicked"/>
                                </Grid>
                            </StackLayout>
                        </StackLayout>
                    </ScrollView>
                </Border>
            </Grid>
        </Grid>
    </ScrollView>
</ContentPage>